<div class="file-manager-overlay">
  <div class="file-manager-modal">
    <!-- HEADER -->
    <div class="modal-header">
      <h2>File Manager</h2>
      <button class="close-btn" (click)="closeModal()">&times;</button>
    </div>

    <!-- CONTENT SCROLLABLE -->
    <div class="modal-body">
      <div class="content-box">
        <!-- DROP ZONE -->
        <div
          class="drop-zone"
          (dragover)="onDragOver($event)"
          (dragenter)="onDragEnter($event)"
          (dragleave)="onDragLeave($event)"
          (drop)="onDrop($event)"
          (click)="fileInput.click()"
          [class.drag-over]="isDragOver"
        >
          Drop files here or click to upload
          <input
            type="file"
            multiple
            style="display: none"
            #fileInput
            (change)="onFileSelect($event)"
          />
        </div>

        <!-- ERROR MESSAGE -->
        <div *ngIf="error" class="error-message">{{ error }}</div>

        <!-- TABLE -->
        <app-generic-table
          [title]="'Files'"
          [columns]="fileColumns"
          [data]="files"
          [templates]="templates"
          [selectedIds]="selectedFileIds"
          (selectedIdsChange)="selectedFileIds = $event"
          [loading]="loading"
          [keyword]="keyword"
          (keywordChange)="keyword = $event"
          [pagination]="{
            page: page,
            size: size,
            totalItems: totalItems,
            onPageChange: onPageChange.bind(this)
          }"
          [showDeleteButton]="true"
          [showCreateButton]="false"
          (deleteSelected)="deleteSelectedFiles()"
          (pageSizeChange)="onPageSizeChange($event)"
          [pageSizeOptions]="[20, 50]"
        >
          <!-- Custom template for the Insert button -->
          <ng-template #action let-row="$row">
            <button
              *ngIf="isEntityLinkingMode"
              class="btn-insert"
              (click)="linkOrSelectFile(row)"
            >
              Insert
            </button>
          </ng-template>
        </app-generic-table>
      </div>
    </div>
  </div>
</div>
